[id='log-process-instance-con']

= Logging process instances

Logging is a mechanism that allows you to store information about the execution of a process instance. You can log a process instance using a special event listener that listens to the {PROCESS_ENGINE} for any relevant events to be logged. Later, the information is stored separately from other non-log information that is stored either in the server built-in database (H2) or in a connected data source JPA or Hibernate.

You can use the `jbpm-audit` module that provides an event listener and allows you to store the information directly in a database using JPA or Hibernate.

[source,subs="attributes+"]
----
<dependency>
	<groupId>org.jbpm</groupId>
	<artifactId>jbpm-audit</artifactId>
	<version>{PRODUCT_VERSION_LONG}-redhat-2</version>
</dependency>
----

The log data is stored as follows:

* Process instance as `ProcessInstanceLog`
+
[id='fields_processinstancelog_{context}']
.Fields of the ProcessInstanceLog table
[cols="25%,50%,25%", options="header"]
|===

|Field
|Description
|Nullable

|`id`
|Primary key of a log entity
|No

|`end_date`
|End date of a process instance
|Yes

|`processId`
|Id of an underlying process
|Yes

|`processInstanceId`
|Id of a process instance
|No

|`start_date`
|Start date of a process instance
|Yes

|`status`
|Status of a process instance
|Yes

|`parentProcessInstanceId`
|Process instance ID of a parent process instance
|Yes

|`outcome`
|Outcome of a process instance such as error code
|Yes

|===

* Element instance as `NodeInstanceLog`
+
[id='fields_nodeinstancelog_{context}']
.Fields of the NodeInstanceLog table
[cols="25%,50%,25%", options="header"]
|===

|Field
|Description
|Nullable

|`id`
|Primary key of a log entity
|No

|`log_date`
|Date of a log event
|Yes

|`nodeId`
|Node ID of an underlying process element
|Yes

|`nodeInstanceId`
|ID of a node instance
|Yes

|`nodeName`
|Name of an underlying node
|Yes

|`processId`
|ID of an underlying process
|Yes

|`processInstanceId`
|ID of a parent process instance
|No

|`type`
|Type of an event
|No

|===

* Variable instance as `VariableInstanceLog`
+
[id='fields_variableinstancelog_{context}']
.Fields of the VariableInstanceLog table
[cols="25%,50%,25%", options="header"]
|===

|Field
|Description
|Nullable

|`id`
|Primary key of a log entity
|No

|`log_date`
|Date of a log event
|Yes

|`processId`
|ID of an underlying process
|Yes

|`processInstanceId`
|ID of a process instance
|No

|`value`
|Value of a variable at log time
|Yes

|`variableId`
|ID of a variable
|Yes

|`variableInstanceId`
|ID of a variable instance
|Yes

|`outcome`
|Outcome of a process instance such as error code
|Yes

|===

Also, you can define your data model with custom information and use the process event listeners to extract the information.
